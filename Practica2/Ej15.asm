TIMER EQU 10H 
PIC EQU 20H 
EOI EQU 20H 
N_F10 EQU 9 
N_CLK EQU 10 

ORG 36 
IP_F10 DW RUT_F10
ORG 40
IP_CLK DW RUT_CLK 

ORG 1000H 
SEG DB ?
DB " "
MSJ DB "Ingrese un numero: "
FIN DB ?

ORG 3000H 
RUT_F10: PUSH AX 
MOV AL, 0FCH 
OUT PIC+1, AL
MOV AL, EOI
OUT PIC, AL 
POP AX 
IRET 

RUT_CLK: PUSH AX 
CMP SEG, 30H
JZ FIN_CLK 
INT 7 
DEC SEG 
JMP RUT_CLK
FIN_CLK: MOV AL, EOI 
OUT PIC, AL 
POP AX 
IRET 

ORG 2000H
MOV BX, OFFSET MSJ 
MOV AL, OFFSET FIN - OFFSET MSJ
INT 7 
MOV BX, OFFSET SEG 
INT 6 
CLI 
MOV AL, 0FEH 
OUT PIC+1, AL 
MOV AL, N_CLK 
OUT PIC+5, AL 
MOV AL, N_F10
OUT PIC+4, AL 
MOV AL, 1
OUT TIMER+1, AL 
MOV AL, 0
OUT TIMER, AL 
MOV BX, OFFSET SEG 
MOV AL, OFFSET MSJ - OFFSET SEG 
STI 
LAZO: JMP LAZO 
END 