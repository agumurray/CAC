TIMER EQU 10H
PIC EQU 20H
N_TIMER EQU 10
N_F10 EQU 9

ORG 36
IP_F10 DW RUT_F10

ORG 40 
IP_TIMER DW RUT_TIMER

ORG 3000H
RUT_F10: PUSH AX
IN AL, PIC+1
CMP AL, 0FCH
JZ APAGAR
MOV AL, 0FCH
OUT PIC+1, AL
JMP FINRUT
APAGAR: MOV AL, 0FEH
OUT PIC+1, AL
FINRUT: MOV AL, 20H
OUT PIC, AL
POP AX
IRET

RUT_TIMER: PUSH AX
CMP NUM1, 33H
JZ FINRUT2
CMP NUM2, 39H
JZ RESET
INC NUM2
JMP FINRUT2
RESET: MOV NUM2, 30H
INC NUM1
FINRUT2: MOV AL,2
INT 7
MOV AL, 0
OUT TIMER, AL
MOV AL, 20H
OUT PIC, AL
POP AX
IRET

ORG 1000H
NUM1 DB 30H
NUM2 DB 30H

ORG 2000H
MOV BX, OFFSET NUM1
CLI
MOV AL, 0FEH
OUT PIC+1, AL
MOV AL, N_F10
OUT PIC+4, AL
MOV AL, N_TIMER
OUT PIC+5, AL
MOV AL, 0
OUT TIMER, AL
MOV AL, 1
OUT TIMER+1,AL
STI
LAZO: CMP NUM1, 33H
JNZ LAZO
HLT
END